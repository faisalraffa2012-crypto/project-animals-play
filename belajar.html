# project-animals-play
<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ANIMALS PLAY - WORLD UPDATE</title>
    <style>
        body { margin: 0; overflow: hidden; background: #000; font-family: 'Arial', sans-serif; color: white; touch-action: none; }
        
        /* --- UI LOBBY --- */
        #lobby { position: absolute; width: 100%; height: 100%; background: #1a1a2e; z-index: 2000; display: flex; flex-direction: column; align-items: center; overflow-y: auto; }
        .p-card { background: rgba(255,255,255,0.1); padding: 15px; border-radius: 15px; text-align: center; border: 2px solid #00d2ff; width: 80%; margin-top: 20px; }
        .stat-bar { display: flex; justify-content: space-around; width: 100%; margin: 10px 0; font-weight: bold; color: gold; }
        
        /* --- SHOP & SOCIAL --- */
        .shop-box { width: 90%; background: rgba(0,0,0,0.5); border-radius: 10px; padding: 10px; margin: 10px 0; }
        .grid { display: flex; gap: 10px; overflow-x: auto; padding: 10px 0; }
        .item { min-width: 70px; height: 80px; background: #fff; color: #000; border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 10px; border: 3px solid transparent; }
        .item.active { border-color: #00ff00; }

        /* --- GAME UI --- */
        #game-ui { display: none; position: absolute; top: 0; width: 100%; height: 100%; pointer-events: none; }
        .top-left { position: absolute; top: 15px; left: 15px; pointer-events: auto; }
        .top-right { position: absolute; top: 15px; right: 15px; pointer-events: auto; display: flex; gap: 10px; }
        #leaderboard { position: absolute; top: 70px; right: 15px; background: rgba(0,0,0,0.5); padding: 10px; border-radius: 5px; font-size: 12px; }
        
        #chat-box { position: absolute; bottom: 150px; left: 15px; pointer-events: auto; }
        #chat-in { padding: 10px; border-radius: 5px; border: none; width: 150px; display: none; }
        
        #joy-base { position: absolute; bottom: 40px; left: 40px; width: 100px; height: 100px; background: rgba(255,255,255,0.1); border-radius: 50%; pointer-events: auto; }
        #joy-stk { position: absolute; top: 30px; left: 30px; width: 40px; height: 40px; background: #fff; border-radius: 50%; }
        .btn-act { position: absolute; bottom: 50px; right: 30px; display: flex; flex-direction: column; gap: 10px; pointer-events: auto; }
        .circle { width: 60px; height: 60px; background: rgba(255,255,255,0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; border: 2px solid #fff; font-weight: bold; }
    </style>
</head>
<body>

    <div id="lobby">
        <h2>ANIMALS PLAY <span style="color:#00d2ff">V13</span></h2>
        <div class="p-card">
            <input type="text" id="p-name" value="Admin" style="width:80%; padding:10px; text-align:center; border-radius:5px; border:none;">
            <div class="stat-bar"><span>ü™ô <span id="l-coin">0</span></span> <span>üèÜ <span id="l-rank">1</span></span></div>
        </div>

        <button onclick="start()" style="width:85%; padding:15px; background:#4caf50; border:none; border-radius:10px; color:white; font-weight:bold; margin:15px 0;">MULAI BERMAIN</button>

        <div class="shop-box">
            <div style="font-size:12px; margin-bottom:5px;">PILIH BAJU & AKSESORIS</div>
            <div id="grid-baju" class="grid"></div>
        </div>
    </div>

    <div id="game-ui">
        <div class="top-left"><div class="circle" onclick="toggleChat()" style="width:40px; height:40px;">üí¨</div></div>
        <div id="chat-box"><input type="text" id="chat-in" placeholder="Ketik pesan..."></div>
        
        <div class="top-right">
            <div class="circle" onclick="location.reload()" style="width:40px; height:40px; background:red;">‚úñ</div>
        </div>

        <div id="leaderboard">
            <b>TOP PLAYERS</b><br>
            1. <span id="lb-name">Admin</span> - ü™ô <span id="lb-coin">INF</span>
        </div>

        <div id="joy-base"><div id="joy-stk"></div></div>
        <div class="btn-act">
            <div class="circle" onclick="doSit()">SIT</div>
            <div class="circle" onclick="doJump()">JUMP</div>
        </div>
    </div>

    <script type="module">
        import * as THREE from 'https://cdn.skypack.dev/three@0.132.2';

        let coins = 0, name = "Admin", isAdmin = true;
        let equip = {baju:0};
        const bajuDB = [{n:'Default',c:0x2196f3},{n:'Red Admin',c:0xff0000},{n:'Neon',c:0x39ff14}];

        function syncLobby() {
            name = document.getElementById('p-name').value;
            isAdmin = name.toLowerCase().includes("admin");
            document.getElementById('l-coin').innerText = isAdmin ? "INF" : coins;
            document.getElementById('lb-name').innerText = name;
            document.getElementById('lb-coin').innerText = isAdmin ? "INF" : coins;
        }

        const grid = document.getElementById('grid-baju');
        bajuDB.forEach((b,i)=>{
            const d = document.createElement('div'); d.className='item';
            d.innerHTML = `<div style="width:20px;height:20px;background:#${b.c.toString(16).padStart(6,'0')}"></div>${b.n}`;
            d.onclick = () => { equip.baju = i; document.querySelectorAll('.item').forEach(e=>e.classList.remove('active')); d.classList.add('active'); };
            grid.appendChild(d);
        });

        // THREE JS
        let scene, cam, renderer, player, joy={x:0,y:0}, camA={x:0,y:0.5}, isSit=false;
        let trees=[], coins_obj=[];

        window.start = () => {
            syncLobby();
            document.getElementById('lobby').style.display='none';
            document.getElementById('game-ui').style.display='block';
            init();
        };

        function init() {
            scene = new THREE.Scene(); scene.background = new THREE.Color(0x87ceeb);
            cam = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
            renderer = new THREE.WebGLRenderer({antialias:true});
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);

            scene.add(new THREE.AmbientLight(0xffffff, 0.8));

            // TAMAN & RUMPUT
            const ground = new THREE.Mesh(new THREE.PlaneGeometry(100,100), new THREE.MeshPhongMaterial({color:0x4caf50}));
            ground.rotation.x = -Math.PI/2; scene.add(ground);

            // KOLAM
            const water = new THREE.Mesh(new THREE.CircleGeometry(5,32), new THREE.MeshPhongMaterial({color:0x00d2ff, transparent:true, opacity:0.8}));
            water.rotation.x = -Math.PI/2; water.position.set(10, 0.02, 10); scene.add(water);

            // POHON & KURSI
            for(let i=0; i<10; i++) {
                const tr = new THREE.Group();
                const trunk = new THREE.Mesh(new THREE.CylinderGeometry(0.2,0.2,2), new THREE.MeshPhongMaterial({color:0x5d4037}));
                const leaf = new THREE.Mesh(new THREE.SphereGeometry(1), new THREE.MeshPhongMaterial({color:0x2e7d32}));
                leaf.position.y = 1.5; tr.add(trunk); tr.add(leaf);
                tr.position.set(Math.random()*40-20, 1, Math.random()*40-20);
                scene.add(tr);
            }

            const bench = new THREE.Mesh(new THREE.BoxGeometry(2,0.5,1), new THREE.MeshPhongMaterial({color:0x333}));
            bench.position.set(-5, 0.25, -5); scene.add(bench);

            // PLAYER
            player = new THREE.Group();
            const body = new THREE.Mesh(new THREE.BoxGeometry(0.6,0.8,0.3), new THREE.MeshPhongMaterial({color:bajuDB[equip.baju].c}));
            body.position.y=1; player.add(body);
            const head = new THREE.Mesh(new THREE.BoxGeometry(0.4,0.4,0.4), new THREE.MeshPhongMaterial({color:0xffcc99}));
            head.position.y=0.6; body.add(head);
            
            // Name Tag
            const can = document.createElement('canvas'); can.width=256; can.height=64;
            const ctx = can.getContext('2d'); ctx.fillStyle='white'; ctx.font='bold 30px Arial'; ctx.textAlign='center';
            ctx.fillText((isAdmin?'‚úî ':'')+name, 128, 45);
            const spr = new THREE.Sprite(new THREE.SpriteMaterial({map: new THREE.CanvasTexture(can)}));
            spr.position.y=2.2; spr.scale.set(1.5,0.4,1); player.add(spr);

            scene.add(player);
            player.userData = {vy:0, g:true};
            loop();
        }

        function loop() {
            requestAnimationFrame(loop);
            if(player && !isSit) {
                const f = new THREE.Vector3(0,0,-1).applyQuaternion(cam.quaternion); f.y=0; f.normalize();
                const r = new THREE.Vector3(1,0,0).applyQuaternion(cam.quaternion); r.y=0; r.normalize();
                const move = f.multiplyScalar(-joy.y).add(r.multiplyScalar(joy.x));
                player.position.add(move.multiplyScalar(0.15));
                if(move.length()>0.01) player.rotation.y = Math.atan2(move.x, move.z);

                player.position.y += player.userData.vy;
                if(player.position.y>0) player.userData.vy-=0.02; else {player.position.y=0; player.userData.vy=0; player.userData.g=true;}
            }
            cam.position.set(player.position.x + 10*Math.sin(camA.x), player.position.y + 6, player.position.z + 10*Math.cos(camA.x));
            cam.lookAt(player.position.x, player.position.y+1, player.position.z);
            renderer.render(scene, cam);
        }

        // ACTIONS
        window.doJump = () => { if(player.userData.g){ player.userData.vy=0.4; player.userData.g=false; isSit=false; player.rotation.x=0;} };
        window.doSit = () => { 
            isSit = !isSit;
            if(isSit) { player.position.y = 0.3; player.rotation.x = -0.5; }
            else { player.position.y = 0; player.rotation.x = 0; }
        };

        // CAMERA PUTAR
        let isR=false, lx=0;
        document.addEventListener('touchstart', e=>{ if(e.touches[0].clientX > window.innerWidth/2){isR=true; lx=e.touches[0].clientX;} });
        document.addEventListener('touchmove', e=>{ if(isR){ camA.x += (e.touches[0].clientX-lx)*0.01; lx=e.touches[0].clientX; }});
        document.addEventListener('touchend', ()=>isR=false);

        // JOYSTICK
        const jB=document.getElementById('joy-base'), jS=document.getElementById('joy-stk');
        jB.ontouchmove=e=>{
            const r=jB.getBoundingClientRect(), t=e.touches[0], x=t.clientX-(r.left+50), y=t.clientY-(r.top+50);
            const d=Math.min(Math.sqrt(x*x+y*y), 40), a=Math.atan2(y,x);
            jS.style.transform=`translate(${Math.cos(a)*d}px,${Math.sin(a)*d}px)`;
            joy.x=Math.cos(a)*(d/40); joy.y=Math.sin(a)*(d/40);
        };
        jB.ontouchend=()=>{jS.style.transform='translate(0,0)'; joy={x:0,y:0}};
    </script>
</body>
</html>

